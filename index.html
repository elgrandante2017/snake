<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="coin-counter">
        <div class="coin-icon">$</div>
        <span id="coin-amount">0</span>
    </div>
    <div id="brightness-icon">
        <div class="brightness-wrench">üîß</div>
    </div>

    <div id="language-icon">
        <div class="language-globe">üåê</div>
    </div>
    <div id="shop-icon">
        <div class="shop-awning"></div>
        <div class="shop-base">
            <div class="shop-window"></div>
        </div>
        <div class="shop-label" data-translate="shop">Tienda</div>
    </div>
    <div class="wrapper">
        <h1 data-translate="gameTitle">Snake</h1>
        <div class="game-container">
            <canvas id="gameCanvas" width="400" height="400"></canvas>
            <!-- Part√≠culas para efectos visuales -->
            <div id="particles-container"></div>
        </div>
        <div class="stats-container">
            <div class="score-container">
                <span data-translate="score">Puntuaci√≥n</span>: <span id="score">0</span>
            </div>
            <div class="record-container">
                <span data-translate="record">Record</span>: <span id="record">0</span>
            </div>
        </div>
        <div class="level-container">
            <div class="level-info">
                <span data-translate="level">Nivel</span>: <span id="level">1</span>
            </div>
            <div class="experience-bar">
                <div class="experience-fill" id="experience-fill"></div>
                <span class="experience-text" id="experience-text">0/100 XP</span>
            </div>
        </div>
        <button id="restartButton" data-translate="startButton">Empezar</button>
    </div>
    <script src="src/main.js" type="module"></script>

    <div id="shop-cosmetics-overlay" class="hidden">
        <div class="shop-content">
            <h2 data-translate="cosmetics">Cosm√©ticos para la serpiente</h2>
            <div class="shop-grid">
                <div class="shop-item">
                    <div class="cosmetic-display">
                        <div class="snake-suit"></div>
                        <div class="snake-hat"></div>
                    </div>
                    <p class="item-name" data-translate="elegantSuit">Traje Elegante</p>
                    <p class="item-price" id="elegant-suit-price">100 <span class="coin-icon-small">$</span></p>
                    <button id="elegant-suit-button" class="shop-item-button" data-translate="buy">Comprar</button>
                </div>
                <div class="shop-item">? <p>Pr√≥ximamente</p></div>
                <div class="shop-item">? <p>Pr√≥ximamente</p></div>
                <div class="shop-item">? <p>Pr√≥ximamente</p></div>
                <div class="shop-item">? <p>Pr√≥ximamente</p></div>
                <div class="shop-item">? <p>Pr√≥ximamente</p></div>
                <div class="shop-item">? <p>Pr√≥ximamente</p></div>
                <div class="shop-item">? <p>Pr√≥ximamente</p></div>
                <div class="shop-item">? <p>Pr√≥ximamente</p></div>
            </div>
            <button id="shop-cosmetics-back-button" data-translate="close">Volver</button>
        </div>
    </div>
    <div id="shop-upgrades-overlay" class="hidden">
        <div class="shop-content upgrades-horizontal">
            <h2 data-translate="upgrades">Mejoras para la serpiente</h2>

            <!-- Contenedor horizontal: SVG del tanque (izquierda) + ilustraci√≥n del cient√≠fico (derecha) -->
            <div class="upgrade-horizontal">
                <!-- Tanque SVG (mejorado: clip para mantener cabeza dentro, cara m√°s alegre) -->
                <div class="upgrade-tank" aria-hidden="true">
                    <svg width="420" height="260" viewBox="0 0 420 260" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Tanque con serpiente">
                        <defs>
                            <linearGradient id="glassGrad" x1="0" x2="0" y1="0" y2="1">
                                <stop offset="0%" stop-color="#eaf6ff"/>
                                <stop offset="60%" stop-color="#cfeeff"/>
                                <stop offset="100%" stop-color="#dff6ff"/>
                            </linearGradient>
                            <linearGradient id="liquidGrad" x1="0" x2="0" y1="0" y2="1">
                                <stop offset="0%" stop-color="#9fd8ff"/>
                                <stop offset="100%" stop-color="#76c7ff"/>
                            </linearGradient>
                            <filter id="glassShadow" x="-50%" y="-50%" width="200%" height="200%">
                                <feDropShadow dx="0" dy="6" stdDeviation="12" flood-color="#000" flood-opacity="0.25"/>
                            </filter>

                            <!-- Clip para el interior del tanque: evita que la cabeza sobresalga -->
                            <clipPath id="tankClip">
                                <rect x="12" y="44" width="296" height="162" rx="12" ry="12" />
                            </clipPath>
                        </defs>

                        <!-- Base del tanque -->
                        <rect x="10" y="10" width="300" height="220" rx="18" ry="18" fill="url(#glassGrad)" stroke="#9fc9d9" stroke-width="4" filter="url(#glassShadow)"/>
                        <!-- L√≠quido (grupo separado para claridad) -->
                        <g transform="translate(10,40)" clip-path="url(#tankClip)">
                            <rect x="0" y="0" width="300" height="170" rx="14" ry="14" fill="url(#liquidGrad)"/>
                            <!-- Efecto de brillos en el l√≠quido -->
                            <path d="M20 30 C60 10, 140 10, 180 30 C220 50, 260 50, 280 30" fill="none" stroke="rgba(255,255,255,0.25)" stroke-width="6" stroke-linecap="round"/>
                            <path d="M30 80 C90 60, 200 60, 250 80" fill="none" stroke="rgba(255,255,255,0.12)" stroke-width="10" stroke-linecap="round"/>
                        </g>

                        <!-- Serpiente (silhouette curvada), dentro del clip del tanque -->
                        <g transform="translate(24,72)" clip-path="url(#tankClip)" aria-hidden="true">
                            <!-- Cuerpo (curva m√°s contenida horizontalmente) -->
                            <path d="M0 40 C36 18, 95 8, 138 26 C180 44, 208 64, 240 58" fill="none" stroke="#0f3b2d" stroke-width="14" stroke-linecap="round" stroke-linejoin="round" opacity="0.98"/>
                            <path d="M0 44 C36 22, 95 12, 138 30 C180 48, 208 68, 240 62" fill="none" stroke="#2aa17a" stroke-width="8" stroke-linecap="round" opacity="0.95"/>

                            <!-- Cabeza (m√°s peque√±a y claramente dentro del tanque) -->
                            <g transform="translate(236,56)">
                                <path d="M0 0 C8 -6, 18 -6, 24 2 C30 10, 28 18, 22 22 C16 26, 8 24, 4 20 C0 16,0 8,0 0 Z" fill="#0f3b2d"/>
                                <!-- Ojos felices (dos puntos) -->
                                <circle cx="14" cy="8" r="2.2" fill="#fff"/>
                                <circle cx="8" cy="8" r="2.2" fill="#fff"/>
                                <!-- Sonrisa -->
                                <path d="M6 14 q4 4 10 0" stroke="#fff" stroke-width="2" stroke-linecap="round" fill="none"/>
                                <!-- Brillo sutil en cabeza -->
                                <ellipse cx="18" cy="6" rx="3" ry="1.5" fill="rgba(255,255,255,0.6)"/>
                            </g>
                        </g>

                        <!-- Etiqueta decorativa inferior del tanque -->
                        <g transform="translate(20,210)">
                            <rect x="0" y="0" width="280" height="30" rx="6" ry="6" fill="#e6f7ff" opacity="0.6"/>
                            <text x="140" y="20" text-anchor="middle" font-family="Poppins, sans-serif" font-size="12" fill="#0b4b3a" font-weight="600">Tanque de investigaci√≥n ‚Äî Concepto</text>
                        </g>
                    </svg>
                </div>

                <!-- Cient√≠fico SVG (derecha) -->
                <div class="upgrade-scientist" aria-hidden="true">
                    <svg width="260" height="260" viewBox="0 0 260 260" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Cient√≠fico">
                        <defs>
                            <linearGradient id="coatGrad" x1="0" x2="0" y1="0" y2="1">
                                <stop offset="0%" stop-color="#ffffff"/>
                                <stop offset="100%" stop-color="#f0f6ff"/>
                            </linearGradient>
                        </defs>

                        <!-- Piso -->
                        <rect x="0" y="230" width="260" height="30" fill="#e9eef3"/>

                        <!-- Cuerpo (bata) -->
                        <path d="M80 70 q0 70 -6 110 l24 0 q10 -40 10 -110 z" fill="url(#coatGrad)" stroke="#d0d8e6" stroke-width="2"/>
                        <path d="M180 70 q0 70 6 110 l-24 0 q-10 -40 -10 -110 z" fill="url(#coatGrad)" stroke="#d0d8e6" stroke-width="2"/>

                        <!-- Cabeza -->
                        <ellipse cx="130" cy="56" rx="30" ry="34" fill="#fbe9d6" stroke="#e0bca3" stroke-width="1.5"/>
                        <!-- Gafas (goggles) -->
                        <rect x="110" y="50" width="18" height="12" rx="4" fill="#0b4b3a"/>
                        <rect x="138" y="50" width="18" height="12" rx="4" fill="#0b4b3a"/>
                        <rect x="128" y="54" width="8" height="4" fill="#cfe9ff"/>
                        <!-- Pelo (m√°s abundante, cubre la parte superior de la cabeza) -->
                        <path d="M100 38
                                 q18 -28 48 -28
                                 q22 0 36 18
                                 q-6 -6 -18 -8
                                 q-12 -2 -30 6
                                 q-12 6 -34 12 Z"
                              fill="#3b3b3b" opacity="0.98"/>

                        <!-- Brazo (sin clipboard ni papel) -->
                        <g transform="translate(40,120)">
                            <path d="M0 0 q20 10 36 0 q-6 -18 -9 -28 q-12 -6 -27 6 z" fill="#fbe9d6" stroke="#e0bca3" stroke-width="1"/>
                        </g>

                        <!-- Tubo de ensayo en la mano -->
                        <g transform="translate(170,120)">
                            <rect x="0" y="0" width="10" height="36" rx="4" fill="#f6f8fb" stroke="#d1d7e1"/>
                            <ellipse cx="5" cy="-2" rx="10" ry="6" fill="#a0e1ff" opacity="0.9"/>
                        </g>

                        <!-- Etiqueta decorativa inferior del cient√≠fico -->
                        <g transform="translate(20,200)">
                            <text x="120" y="20" text-anchor="middle" font-family="Poppins, sans-serif" font-size="12" fill="#1b3b57" font-weight="600">Investigador principal</text>
                        </g>
                    </svg>
                </div>
            </div>

            <!-- Texto descriptivo traducido y bot√≥n volver -->
            <div class="upgrade-description">
                <p class="item-name" data-translate="upgradeTankName">Serpiente en tanque</p>
                <p class="item-price" id="upgrade-tank-desc" data-translate="upgradeTankDesc">Un concepto: la serpiente en un tanque estilo laboratorio. Actualmente solo decorativo.</p>
                <button id="shop-upgrades-back-button" data-translate="close">Volver</button>
            </div>
        </div>
    </div>

    <div id="shop-main-overlay" class="hidden">
        <div class="shop-content">
            <h2 data-translate="shop">Tienda</h2>
            <div class="shop-main-menu">
                <button id="shop-cosmetics-button" class="shop-menu-button" data-translate="cosmetics">Cosm√©ticos para la serpiente</button>
                <button id="shop-upgrades-button" class="shop-menu-button" data-translate="upgrades">Mejoras para la serpiente</button>
                <button id="shop-achievements-button" class="shop-menu-button" data-translate="achievements">Logros</button>
            </div>
            <button id="shop-main-close-button" data-translate="close">Cerrar</button>
        </div>
    </div>

    <div id="coming-soon-modal" class="hidden">
        <div class="modal-content">
            <h3 data-translate="comingSoon">¬°Pr√≥ximamente!</h3>
            <p data-translate="comingSoonDesc">Esta secci√≥n estar√° disponible en futuras actualizaciones.</p>
            <button id="coming-soon-close" data-translate="close">Cerrar</button>
        </div>
    </div>

    <div id="brightness-overlay" class="hidden">
        <div class="brightness-content">
            <h3 data-translate="brightness">Control de Brillo</h3>
            <div class="brightness-slider-container">
                <label for="brightness-slider" data-translate="brightness">Brillo:</label>
                <input type="range" id="brightness-slider" min="0.1" max="2" step="0.1" value="1">
                <span id="brightness-value">100%</span>
            </div>
            <button id="brightness-default" data-translate="default">Predeterminado</button>
            <button id="brightness-close" data-translate="close">Cerrar</button>
        </div>
    </div>

    <div id="language-overlay" class="hidden">
        <div class="language-content">
            <h3>üåê <span data-translate="languages">Idiomas</span></h3>
            <div class="language-selection">
                <button id="lang-es" class="language-button selected" data-lang="es">
                    üá™üá∏ <span data-translate="spanish">Espa√±ol</span>
                </button>
                <button id="lang-en" class="language-button" data-lang="en">
                    üá∫üá∏ <span data-translate="english">Ingl√©s</span>
                </button>
                <button id="lang-fr" class="language-button" data-lang="fr">
                    üá´üá∑ <span data-translate="french">Franc√©s</span>
                </button>
                <button id="lang-pt" class="language-button" data-lang="pt">
                    üáµüáπ <span data-translate="portuguese">Portugu√©s</span>
                </button>
                <button id="lang-zh" class="language-button" data-lang="zh">
                    üá®üá≥ <span data-translate="chinese">Chino</span>
                </button>
                <button id="lang-ru" class="language-button" data-lang="ru">
                    üá∑üá∫ <span data-translate="russian">Ruso</span>
                </button>
            </div>
            <button id="language-close" data-translate="close">Cerrar</button>
        </div>
    </div>

    <div id="achievements-overlay" class="hidden">
        <div class="achievements-content">
            <button id="achievements-modal-close" class="modal-close" aria-label="Cerrar">‚úñ</button>
            <h3>üèÜ <span data-translate="achievements">Logros</span></h3>

            <!-- Controles de navegaci√≥n -->
            <div class="achievement-controls">
                <button id="achievement-prev" class="counter-arrow" aria-label="Anterior">‚¨ÖÔ∏è</button>
                <div id="achievement-index">1 / 10</div>
                <button id="achievement-next" class="counter-arrow" aria-label="Siguiente">‚û°Ô∏è</button>
            </div>

            <!-- Panel principal del logro seleccionado -->
            <div class="achievement-panel">
                <div id="achievement-title" class="achievement-title">?</div>
                <div id="achievement-badge" class="achievement-badge">‚ùì</div>
                <div id="achievement-desc" class="achievement-desc">C√≥mo desbloquear este logro</div>
            </div>

            <!-- Bot√≥n reclamar aparece solo si el logro est√° desbloqueado y no reclamado -->
            <button id="achievement-claim" class="shop-menu-button hidden">Reclamar</button>
        </div>
    </div>
</body>
</html>